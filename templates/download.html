<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

    <script>
        function displayTimer() {
            var timerElement = document.getElementById('timer');
            timerElement.style.display = 'block';
            var countdown = 7200;
            var timerDisplay = document.getElementById('timerCountdown');

            var timer = setInterval(function() {
                countdown--;
                if (countdown <= 0) {
                    clearInterval(timer);
                    timerElement.style.display = 'none';
                    redirectToPreviousPage();
                } else {
                    timerDisplay.textContent = formatTime(countdown);
                }
            }, 1000);
        }

        function formatTime(seconds) {
            var hours = Math.floor(seconds / 3600);
            var minutes = Math.floor((seconds % 3600) / 60);
            var remainingSeconds = seconds % 60;
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function redirectToPreviousPage() {
            window.history.back();
        }

        window.onload = function() {
            displayTimer();
        };
    </script>
</head>
<body>
    <div class="container">
        <h1>Download Page</h1>
        <div id="timer" style="display:none;">File will be deleted in <span id="timerCountdown">02:00:00</span> (HH:MM:SS)</div>
        {% if zip_file_path %}
            <a id="downloadBtn" href="{{ url_for('download', filename=zip_file_path) }}" download>Click here to download the file</a>
        {% endif %}
    </div>
    <footer style="position: fixed; bottom: 10px; right: 10px; font-size: 14px; color: #6c757d; background-color: #f8f9fa; padding: 10px; border-radius: 5px; box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1); display: flex; align-items: center;">
        <span>Made with ❤️ by Ishwar Mhase | Follow me on</span>
        <a href="https://twitter.com/IshwarMhase" target="_blank" style="color: #1da1f2; text-decoration: none; display: inline-flex; align-items: center; margin-left: 10px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 5px;">
                <path d="M22.46 2.2c-.8.35-1.6.63-2.46.83.88-.53 1.56-1.34 1.88-2.3-.83.49-1.75.84-2.72 1.04-.78-.84-1.9-1.36-3.12-1.36-2.38 0-4.31 1.92-4.31 4.3 0 .34.04.67.12.98-3.58-.18-6.75-1.88-8.87-4.47-.37.63-.58 1.37-.58 2.15 0 1.48.75 2.78 1.88 3.54-.7 0-1.36-.21-1.94-.53v.05c0 2.07 1.47 3.8 3.42 4.19-.36.08-.73.12-1.12.12-.27 0-.53-.03-.78-.08.53 1.63 2.03 2.82 3.8 2.85-1.4 1.2-3.17 1.92-5.1 1.92-.33 0-.66-.02-.98-.08 1.82 1.2 3.97 1.9 6.3 1.9 7.56 0 11.68-6.27 11.68-11.68 0-.18 0-.36-.02-.54.8-.58 1.5-1.3 2.06-2.14z"></path>
            </svg>
        </a>
    </footer>
</body>
</html>
